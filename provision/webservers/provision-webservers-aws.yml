#
# Provision AWS EC2 instances as web servers
#
- include: aws/tasks/ec2_find_ami_image.yml

# Provision Content Delivery EC2 instances
- include: aws/tasks/ec2_webserver.yml
  vars:
    instance_name: "{{ contentdelivery_instance_name }}"
    ec2_instance_type: "{{ contentdelivery_ec2_instance_type }}"
    instance_count: "{{ contentdelivery_instance_count }}"
    subnet: "{{ subnet_contentdelivery_1_id }}"
    webserver_groupname: contentdelivery_instances

# Provision Content Delivery EC2 instances
- include: aws/tasks/ec2_webserver.yml
  vars:
    instance_name: "{{ contentdelivery_instance_name }}"
    ec2_instance_type: "{{ contentdelivery_ec2_instance_type }}"
    instance_count: "{{ contentdelivery_instance_count }}"
    subnet: "{{ subnet_contentdelivery_2_id }}"
    webserver_groupname: contentdelivery_instances

# Provision Content Authoring EC2 instances
- include: aws/tasks/ec2_webserver.yml
  vars:
    instance_name: "{{ contentauthoring_instance_name }}"
    ec2_instance_type: "{{ contentauthoring_ec2_instance_type }}"
    instance_count: "{{ contentauthoring_instance_count }}"
    subnet: "{{ subnet_contentauthoring_1_id }}"
    webserver_groupname: contentauthoring_instances

# Provision Content Authoring EC2 instances
- include: aws/tasks/ec2_webserver.yml
  vars:
    instance_name: "{{ contentauthoring_instance_name }}"
    ec2_instance_type: "{{ contentauthoring_ec2_instance_type }}"
    instance_count: "{{ contentauthoring_instance_count }}"
    subnet: "{{ subnet_contentauthoring_2_id }}"
    webserver_groupname: contentauthoring_instances